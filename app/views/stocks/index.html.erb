<h1>Stocks</h1>

<table>
 <thead>
   <tr>
    <th>Ticker</th>
    <th>Current Price</th>
    <th colspan="3"></th>
   </tr>
 </thead>
</table>

<tbody>
 <% @stocks.each do |stock| %>
  <% if stock.user_id == current_user.id %>
    <% if stock.ticker == "" %>
        <% @empty_error_msg = "Please Enter A Stock Symbol!" %>
    <% elsif stock.ticker %>
        <% @ticker = StockQuote::Stock.quote(stock.ticker) %>
            <% if !stock.ticker %>
                <% @junk_error_msg = "Stock Symbol Doesn't Exist. Please Try Again!" %>
            <% end %>
    <% end %>

    <tr>
      <td><%= @ticker.symbol %></td>
      <td><%= @ticker.latest_price%></td>
      <td><%= link_to 'Show', stock %></td>
      <td><%= link_to 'Edit', edit_stock_path(stock) %></td>
      <td><%= link_to 'Destroy', stock, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>

  <% end %>   
<% end %>    
</tbody>
</table>
